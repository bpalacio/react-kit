"use strict";var t=require("./english.js"),e=require("./formats.js"),r=require("./util.js");function s(t,e){let r="";for(const s of t)s.literal?r+=s.val:r+=e(s.val);return r}const n={D:e.DATE_SHORT,DD:e.DATE_MED,DDD:e.DATE_FULL,DDDD:e.DATE_HUGE,t:e.TIME_SIMPLE,tt:e.TIME_WITH_SECONDS,ttt:e.TIME_WITH_SHORT_OFFSET,tttt:e.TIME_WITH_LONG_OFFSET,T:e.TIME_24_SIMPLE,TT:e.TIME_24_WITH_SECONDS,TTT:e.TIME_24_WITH_SHORT_OFFSET,TTTT:e.TIME_24_WITH_LONG_OFFSET,f:e.DATETIME_SHORT,ff:e.DATETIME_MED,fff:e.DATETIME_FULL,ffff:e.DATETIME_HUGE,F:e.DATETIME_SHORT_WITH_SECONDS,FF:e.DATETIME_MED_WITH_SECONDS,FFF:e.DATETIME_FULL_WITH_SECONDS,FFFF:e.DATETIME_HUGE_WITH_SECONDS};class a{static create(t,e={}){return new a(t,e)}static parseFormat(t){let e=null,r="",s=!1;const n=[];for(let a=0;a<t.length;a++){const o=t.charAt(a);"'"===o?(r.length>0&&n.push({literal:s,val:r}),e=null,r="",s=!s):s||o===e?r+=o:(r.length>0&&n.push({literal:!1,val:r}),r=o,e=o)}return r.length>0&&n.push({literal:s,val:r}),n}static macroTokenToFormatOpts(t){return n[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}formatDateTime(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).format()}formatDateTimeParts(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).formatToParts()}formatInterval(t,e={}){return this.loc.dtFormatter(t.start,{...this.opts,...e}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e}).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return r.padStart(t,e);const s={...this.opts};return e>0&&(s.padTo=e),this.loc.numberFormatter(s).format(t)}formatDateTimeFromString(e,r){const n="en"===this.loc.listingMode(),o=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,u=(t,r)=>this.loc.extract(e,t,r),c=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",i=(r,s)=>n?t.monthForDateTime(e,r):u(s?{month:r}:{month:r,day:"numeric"},"month"),m=(r,s)=>n?t.weekdayForDateTime(e,r):u(s?{weekday:r}:{weekday:r,month:"long",day:"numeric"},"weekday"),h=t=>{const r=a.macroTokenToFormatOpts(t);return r?this.formatWithSystemDefault(e,r):t},l=r=>n?t.eraForDateTime(e,r):u({era:r},"era");return s(a.parseFormat(r),(r=>{switch(r){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return c({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return c({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return c({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return n?t.meridiemForDateTime(e):u({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return o?u({day:"numeric"},"day"):this.num(e.day);case"dd":return o?u({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return m("short",!0);case"cccc":return m("long",!0);case"ccccc":return m("narrow",!0);case"EEE":return m("short",!1);case"EEEE":return m("long",!1);case"EEEEE":return m("narrow",!1);case"L":return o?u({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return o?u({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return i("short",!0);case"LLLL":return i("long",!0);case"LLLLL":return i("narrow",!0);case"M":return o?u({month:"numeric"},"month"):this.num(e.month);case"MM":return o?u({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return i("short",!1);case"MMMM":return i("long",!1);case"MMMMM":return i("narrow",!1);case"y":return o?u({year:"numeric"},"year"):this.num(e.year);case"yy":return o?u({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return o?u({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return o?u({year:"numeric"},"year"):this.num(e.year,6);case"G":return l("short");case"GG":return l("long");case"GGGGG":return l("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(r)}}))}formatDurationFromString(t,e){const r=t=>{switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=a.parseFormat(e),o=n.reduce(((t,{literal:e,val:r})=>e?t:t.concat(r)),[]);return s(n,(t=>e=>{const s=r(e);return s?this.num(t.get(s),e.length):e})(t.shiftTo(...o.map(r).filter((t=>t)))))}}module.exports=a;
//# sourceMappingURL=formatter.js.map
