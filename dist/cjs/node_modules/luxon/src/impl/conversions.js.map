{"version":3,"file":"conversions.js","sources":["../../../../../../node_modules/luxon/src/impl/conversions.js"],"sourcesContent":["import {\n  integerBetween,\n  isLeapYear,\n  timeObject,\n  daysInYear,\n  daysInMonth,\n  weeksInWeekYear,\n  isInteger,\n} from \"./util.js\";\nimport Invalid from \"./invalid.js\";\n\nconst nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],\n  leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];\n\nfunction unitOutOfRange(unit, value) {\n  return new Invalid(\n    \"unit out of range\",\n    `you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`\n  );\n}\n\nfunction dayOfWeek(year, month, day) {\n  const d = new Date(Date.UTC(year, month - 1, day));\n\n  if (year < 100 && year >= 0) {\n    d.setUTCFullYear(d.getUTCFullYear() - 1900);\n  }\n\n  const js = d.getUTCDay();\n\n  return js === 0 ? 7 : js;\n}\n\nfunction computeOrdinal(year, month, day) {\n  return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];\n}\n\nfunction uncomputeOrdinal(year, ordinal) {\n  const table = isLeapYear(year) ? leapLadder : nonLeapLadder,\n    month0 = table.findIndex((i) => i < ordinal),\n    day = ordinal - table[month0];\n  return { month: month0 + 1, day };\n}\n\n/**\n * @private\n */\n\nexport function gregorianToWeek(gregObj) {\n  const { year, month, day } = gregObj,\n    ordinal = computeOrdinal(year, month, day),\n    weekday = dayOfWeek(year, month, day);\n\n  let weekNumber = Math.floor((ordinal - weekday + 10) / 7),\n    weekYear;\n\n  if (weekNumber < 1) {\n    weekYear = year - 1;\n    weekNumber = weeksInWeekYear(weekYear);\n  } else if (weekNumber > weeksInWeekYear(year)) {\n    weekYear = year + 1;\n    weekNumber = 1;\n  } else {\n    weekYear = year;\n  }\n\n  return { weekYear, weekNumber, weekday, ...timeObject(gregObj) };\n}\n\nexport function weekToGregorian(weekData) {\n  const { weekYear, weekNumber, weekday } = weekData,\n    weekdayOfJan4 = dayOfWeek(weekYear, 1, 4),\n    yearInDays = daysInYear(weekYear);\n\n  let ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 3,\n    year;\n\n  if (ordinal < 1) {\n    year = weekYear - 1;\n    ordinal += daysInYear(year);\n  } else if (ordinal > yearInDays) {\n    year = weekYear + 1;\n    ordinal -= daysInYear(weekYear);\n  } else {\n    year = weekYear;\n  }\n\n  const { month, day } = uncomputeOrdinal(year, ordinal);\n  return { year, month, day, ...timeObject(weekData) };\n}\n\nexport function gregorianToOrdinal(gregData) {\n  const { year, month, day } = gregData;\n  const ordinal = computeOrdinal(year, month, day);\n  return { year, ordinal, ...timeObject(gregData) };\n}\n\nexport function ordinalToGregorian(ordinalData) {\n  const { year, ordinal } = ordinalData;\n  const { month, day } = uncomputeOrdinal(year, ordinal);\n  return { year, month, day, ...timeObject(ordinalData) };\n}\n\nexport function hasInvalidWeekData(obj) {\n  const validYear = isInteger(obj.weekYear),\n    validWeek = integerBetween(obj.weekNumber, 1, weeksInWeekYear(obj.weekYear)),\n    validWeekday = integerBetween(obj.weekday, 1, 7);\n\n  if (!validYear) {\n    return unitOutOfRange(\"weekYear\", obj.weekYear);\n  } else if (!validWeek) {\n    return unitOutOfRange(\"week\", obj.week);\n  } else if (!validWeekday) {\n    return unitOutOfRange(\"weekday\", obj.weekday);\n  } else return false;\n}\n\nexport function hasInvalidOrdinalData(obj) {\n  const validYear = isInteger(obj.year),\n    validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));\n\n  if (!validYear) {\n    return unitOutOfRange(\"year\", obj.year);\n  } else if (!validOrdinal) {\n    return unitOutOfRange(\"ordinal\", obj.ordinal);\n  } else return false;\n}\n\nexport function hasInvalidGregorianData(obj) {\n  const validYear = isInteger(obj.year),\n    validMonth = integerBetween(obj.month, 1, 12),\n    validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));\n\n  if (!validYear) {\n    return unitOutOfRange(\"year\", obj.year);\n  } else if (!validMonth) {\n    return unitOutOfRange(\"month\", obj.month);\n  } else if (!validDay) {\n    return unitOutOfRange(\"day\", obj.day);\n  } else return false;\n}\n\nexport function hasInvalidTimeData(obj) {\n  const { hour, minute, second, millisecond } = obj;\n  const validHour =\n      integerBetween(hour, 0, 23) ||\n      (hour === 24 && minute === 0 && second === 0 && millisecond === 0),\n    validMinute = integerBetween(minute, 0, 59),\n    validSecond = integerBetween(second, 0, 59),\n    validMillisecond = integerBetween(millisecond, 0, 999);\n\n  if (!validHour) {\n    return unitOutOfRange(\"hour\", hour);\n  } else if (!validMinute) {\n    return unitOutOfRange(\"minute\", minute);\n  } else if (!validSecond) {\n    return unitOutOfRange(\"second\", second);\n  } else if (!validMillisecond) {\n    return unitOutOfRange(\"millisecond\", millisecond);\n  } else return false;\n}\n"],"names":["nonLeapLadder","leapLadder","unitOutOfRange","unit","value","Invalid","dayOfWeek","year","month","day","d","Date","UTC","setUTCFullYear","getUTCFullYear","js","getUTCDay","computeOrdinal","isLeapYear","uncomputeOrdinal","ordinal","table","month0","findIndex","i","gregData","timeObject","gregObj","weekday","weekYear","weekNumber","Math","floor","weeksInWeekYear","obj","validYear","isInteger","validMonth","integerBetween","validDay","daysInMonth","validOrdinal","daysInYear","hour","minute","second","millisecond","validHour","validMinute","validSecond","validMillisecond","validWeek","validWeekday","week","ordinalData","weekData","weekdayOfJan4","yearInDays"],"mappings":"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"}