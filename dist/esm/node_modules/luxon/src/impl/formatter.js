import{meridiemForDateTime as t,monthForDateTime as r,weekdayForDateTime as e,eraForDateTime as s}from"./english.js";import{DATE_SHORT as n,DATE_MED as a,DATE_FULL as o,DATE_HUGE as u,TIME_SIMPLE as c,TIME_WITH_SECONDS as i,TIME_WITH_SHORT_OFFSET as m,TIME_WITH_LONG_OFFSET as h,TIME_24_SIMPLE as l,TIME_24_WITH_SECONDS as f,TIME_24_WITH_SHORT_OFFSET as d,TIME_24_WITH_LONG_OFFSET as y,DATETIME_SHORT as p,DATETIME_MED as g,DATETIME_FULL as w,DATETIME_HUGE as F,DATETIME_SHORT_WITH_SECONDS as Z,DATETIME_MED_WITH_SECONDS as T,DATETIME_FULL_WITH_SECONDS as M,DATETIME_HUGE_WITH_SECONDS as L}from"./formats.js";import{padStart as D}from"./util.js";function k(t,r){let e="";for(const s of t)s.literal?e+=s.val:e+=r(s.val);return e}const S={D:n,DD:a,DDD:o,DDDD:u,t:c,tt:i,ttt:m,tttt:h,T:l,TT:f,TTT:d,TTTT:y,f:p,ff:g,fff:w,ffff:F,F:Z,FF:T,FFF:M,FFFF:L};class E{static create(t,r={}){return new E(t,r)}static parseFormat(t){let r=null,e="",s=!1;const n=[];for(let a=0;a<t.length;a++){const o=t.charAt(a);"'"===o?(e.length>0&&n.push({literal:s,val:e}),r=null,e="",s=!s):s||o===r?e+=o:(e.length>0&&n.push({literal:!1,val:e}),e=o,r=o)}return e.length>0&&n.push({literal:s,val:e}),n}static macroTokenToFormatOpts(t){return S[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTime(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTimeParts(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).formatToParts()}formatInterval(t,r={}){return this.loc.dtFormatter(t.start,{...this.opts,...r}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return D(t,r);const e={...this.opts};return r>0&&(e.padTo=r),this.loc.numberFormatter(e).format(t)}formatDateTimeFromString(n,a){const o="en"===this.loc.listingMode(),u=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,c=(t,r)=>this.loc.extract(n,t,r),i=t=>n.isOffsetFixed&&0===n.offset&&t.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,t.format):"",m=(t,e)=>o?r(n,t):c(e?{month:t}:{month:t,day:"numeric"},"month"),h=(t,r)=>o?e(n,t):c(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),l=t=>{const r=E.macroTokenToFormatOpts(t);return r?this.formatWithSystemDefault(n,r):t},f=t=>o?s(n,t):c({era:t},"era");return k(E.parseFormat(a),(r=>{switch(r){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12==0?12:n.hour%12);case"hh":return this.num(n.hour%12==0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return o?t(n):c({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return u?c({day:"numeric"},"day"):this.num(n.day);case"dd":return u?c({day:"2-digit"},"day"):this.num(n.day,2);case"c":case"E":return this.num(n.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return u?c({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return u?c({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return u?c({month:"numeric"},"month"):this.num(n.month);case"MM":return u?c({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return u?c({year:"numeric"},"year"):this.num(n.year);case"yy":return u?c({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return u?c({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return u?c({year:"numeric"},"year"):this.num(n.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return l(r)}}))}formatDurationFromString(t,r){const e=t=>{switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=E.parseFormat(r),n=s.reduce(((t,{literal:r,val:e})=>r?t:t.concat(e)),[]);return k(s,(t=>r=>{const s=e(r);return s?this.num(t.get(s),r.length):r})(t.shiftTo(...n.map(e).filter((t=>t)))))}}export{E as default};
//# sourceMappingURL=formatter.js.map
